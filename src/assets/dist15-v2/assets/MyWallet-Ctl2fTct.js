import{u as S,b as o,c as F,d as W,j as e,y as O,w as U,e as J}from"./index-CQ0pFaA9.js";import{u as $,r as m,x as B}from"./App-9vCfEsS0.js";import{d as g,D as p}from"./DatePicker-C37LC7Tv.js";const E=()=>{S();const{response:a,sendApiRequest:j}=$(),h=t=>{if(!t)return"";const s=t.date(),n=t.month()+1,d=t.year(),T=s<10?`0${s}`:s,C=n<10?`0${n}`:n;return`${T}-${C}-${d}`},N=g(new Date),c=g(new Date),[r,f]=o.useState(N),[l,y]=o.useState(c),[D,I]=o.useState({}),u=()=>{if(JSON.stringify({FromDate:r,ToDate:l})===JSON.stringify(D)){O.info("No changes in filters. Data already fetched.",{toastId:"jk"});return}const t=JSON.parse(sessionStorage.getItem("loggedInUser"));if(t){const s=h(r),n=h(l);try{j("POST","/CustomerWalletDetail",{CustomerId:t==null?void 0:t.CustomerId,FromDate:s,ToDate:n}),I({FromDate:r,ToDate:l})}catch(d){console.log(d)}}},x=F(),v=t=>{f(t)},b=async t=>{y(t)},A=()=>{JSON.parse(sessionStorage.getItem("loggedInUser"))?u():x(J.openModal())},i=W(t=>t.walletreducer.totalWallet),w=async()=>{if(JSON.parse(sessionStorage.getItem("loggedInUser"))){const{obj:s}=await B();x(U.setTotalWallet(s==null?void 0:s.Response))}};return o.useEffect(()=>{u(),w()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-100 p-0 p-xl-4",children:[e.jsx("h5",{className:"mb-4",children:"My Wallet"}),e.jsx("div",{className:"container-fluid  pb-5  pt-2",children:e.jsx("div",{className:"row justify-content-center",children:e.jsxs("div",{className:"col-md-12",children:[e.jsxs("div",{className:"bg-white p-2 rounded shadow-sm mb-4",children:[e.jsxs("div",{className:"date3 flex-wrap d-flex align-items-center border-bottom justify-content-center gap-3",style:{marginBottom:"20px",paddingBottom:"20px"},children:[e.jsxs("label",{children:["From  ",e.jsx(p,{value:r,handleChange:v,max:c})]}),e.jsxs("label",{children:["To  ",e.jsx(p,{max:c,value:l,handleChange:b})]}),e.jsx("button",{onClick:A,className:"btn btn-outline-primary py-0  px-4 fs-5",children:"Filter"})]}),e.jsxs("div",{className:"row text-center",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("h5",{className:"text-muted",children:"Total Credited"}),e.jsxs("h3",{className:"text-success",children:["+",m(a==null?void 0:a.TotalAmountCr)]})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("h5",{className:"text-muted",children:"Total Balance"}),e.jsx("h3",{className:"text-primary",children:m((i==null?void 0:i.TotalBalance)??"0")})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("h5",{className:"text-muted",children:"Total Debited"}),e.jsxs("h3",{className:"text-danger",children:["-",m(a==null?void 0:a.TotalAmountDr)]})]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded shadow-sm",style:{maxHeight:"410px",overflowY:"scroll",scrollbarWidth:"thin"},children:[e.jsx("h5",{className:"mb-3",children:"Transaction History"}),a==null?void 0:a.lstWalletLedger.map((t,s)=>e.jsxs("div",{className:"d-flex justify-content-between align-items-center border-bottom py-3",children:[e.jsxs("div",{children:[e.jsx("strong",{children:t.Description}),e.jsx("div",{className:"text-muted small",children:t.TransactionDate})]}),e.jsxs("div",{className:parseInt(t.AmountCr)>0?"text-primary":parseInt(t.AmountDr)>0?"text-danger":"text-gray",children:[parseInt(t.AmountCr)>0?"+":parseInt(t.AmountDr)>0?"-":"","₹",parseInt(t.AmountCr)>0?parseInt(t.AmountCr):parseInt(t.AmountDr)>0?parseInt(t.AmountDr):0,e.jsx("div",{className:"small text-muted text-end",children:parseInt(t.AmountCr)>0?"Credited":parseInt(t.AmountDr)>0?"Debited":""})]})]},s))]})]})})})]})})};export{E as default};
