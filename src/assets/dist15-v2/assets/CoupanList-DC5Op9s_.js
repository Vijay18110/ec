import{j as s,b as t,m as I,e as l,A as d,K as h,a as v,y as g}from"./index-CQ0pFaA9.js";import{Y as y,u as A}from"./App-9vCfEsS0.js";import{P as T}from"./ProductNotFound-CgC6xYK4.js";const w=({data:e,handleApplyCoupan:o})=>s.jsx(s.Fragment,{children:s.jsx("div",{className:"col-lg-4",children:s.jsxs("div",{className:"d-flex mb-2 bg-white shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"d-flex justify-content-center align-items-center text-white px-2 font-semibold-btn",style:{writingMode:"vertical-rl",transform:"rotate(360deg)",minWidth:"50px",borderBottomLeftRadius:"10px",borderTopLeftRadius:"10px",fontSize:"21px",height:"auto",backgroundColor:"#000"},children:["â‚¹",parseInt(e==null?void 0:e.CouponValue)]}),s.jsxs("div",{className:(e==null?void 0:e.coupnST)=="ACTIVE"?"flex-grow-1 redeemed active":"flex-grow-1 redeemed",children:[s.jsx("div",{className:"",children:s.jsxs("div",{children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2",children:[s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsx("i",{children:s.jsx(y,{size:20})}),s.jsx("span",{className:"text-uppercase fw-bold text-dark fs-5",children:e==null?void 0:e.CouponCode})]}),s.jsx("span",{className:"btn-new",style:(e==null?void 0:e.coupnST)!="ACTIVE"?{cursor:"default"}:void 0,children:e==null?void 0:e.coupnST})]}),s.jsx("div",{className:" mt-2 pb-3",style:{borderBottom:"1px dashed gray"},children:(e==null?void 0:e.coupnST)=="REDEEMED"?s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:" text-success fs-5 mb-0",children:["Purchased On : ",e==null?void 0:e.PurchaseDate," "]}),s.jsxs("p",{className:" text-success fs-5 mb-0",children:["Redeemed On : ",e==null?void 0:e.RedeemOn," "]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:" text-success fs-5 mb-0",children:["Purchased On: ",e==null?void 0:e.PurchaseDate," "]}),s.jsxs("p",{className:" text-success fs-5 mb-0",children:["Redeemed On :"," ",s.jsx("button",{className:(e==null?void 0:e.coupnST)=="ACTIVE"?"btn  p-0 text-primary small":"btn cursor-default p-0 text-danger cursor small",onClick:()=>(e==null?void 0:e.coupnST)=="ACTIVE"?o(e==null?void 0:e.numCBautoID):void 0,style:(e==null?void 0:e.coupnST)!="ACTIVE"?{cursor:"default"}:void 0,children:"Redeem Now"})]})]})})]})}),s.jsxs("p",{className:(e==null?void 0:e.coupnST)=="ACTIVE"?" text-white small mb-0":" text-dark small mb-0",children:["ADMIN PURCHASE : ",e==null?void 0:e.PurchaseTransactionId," "]})]})]})})}),D=()=>{var m;const{loading:e,response:o,sendApiRequest:i}=A(),u=()=>{const n=JSON.parse(sessionStorage.getItem("loggedInUser"));n?i("POST","/CustomerCouponList",{CustomerId:n.CustomerId,CouponStatus:""}):dispatch(l.openModal())};t.useEffect(()=>{u()},[]);const[E,j]=t.useState([]),[f,p]=t.useState(!1),a=async n=>{try{const r=JSON.parse(sessionStorage.getItem("loggedInUser"));if(r){p(!0);const S={CustomerId:r==null?void 0:r.CustomerId,CouponID:n,IpAddress:""},N={Body:await d.encryptString(h,JSON.stringify({...S}))};let x;x=await v.post("/CustomerApplyCoupon",N);const b=await d.decryptString(h,x.data.body),c=JSON.parse(b);c.Status===0&&(j(c.Response),u()),c.Status===1&&g.error(c.Message),c.Status===3&&dispatch(l.openModal())}else dispatch(l.openModal())}catch(r){g.error(r.Message)}finally{p(!1)}},C=n=>{const r=JSON.parse(sessionStorage.getItem("loggedInUser"));r?i("POST","/CustomerCouponList",{CustomerId:r.CustomerId,CouponStatus:n}):dispatch(l.openModal())};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"my-4",children:[s.jsx("h4",{className:"mb-3",children:"Coupons/Vouchers"}),s.jsxs("div",{className:"card p-4",children:[s.jsx("div",{className:"col-12 mb-4",children:s.jsxs("select",{className:"form-select",onChange:n=>C(n.target.value),"aria-label":"Default select example",children:[s.jsx("option",{value:"",defaultValue:!0,children:"All"}),s.jsx("option",{value:"Y",children:"Active"}),s.jsx("option",{value:"R",children:"Reedeem"})]})}),s.jsx("div",{className:"row",children:(o==null?void 0:o.lstCouponData.length)>0?(m=o==null?void 0:o.lstCouponData)==null?void 0:m.map((n,r)=>s.jsx(w,{data:n,handleApplyCoupan:a},r)):!e&&s.jsx(T,{vh:!0})}),(e||f)&&s.jsx(I,{})]})]})})},V=()=>s.jsx(s.Fragment,{children:s.jsx("div",{className:"w-100  ",children:s.jsx(D,{})})});export{V as default};
