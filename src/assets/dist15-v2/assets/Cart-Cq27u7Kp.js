const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/App-9vCfEsS0.js","assets/index-CQ0pFaA9.js","assets/index-B0MMLymW.css","assets/App-lGMZe9of.css"])))=>i.map(i=>d[i]);
import{j as r,L as Ie,b as S,c as Re,d as E,u as Be,e as k,f as V,R as ke,m as Ue,n as Le,h as De,w as We,A as H,K as Y,a as me,y as G,_ as Fe}from"./index-CQ0pFaA9.js";import{u as fe,n as qe,A as ze,q as _e,r as Pe,s as Je,t as Ve,v as $e,d as Ze,e as He,f as Ye,h as Ge,E as Ke,w as Qe,b as Te,x as Xe,y as ea,g as aa,a as sa}from"./App-9vCfEsS0.js";import ra from"./AddAddress-Ydy9hP8G.js";import{R as ta}from"./index-Dwb-A5wo.js";const na=()=>r.jsx(r.Fragment,{children:r.jsx("div",{className:"rts-navigation-area-breadcrumb",children:r.jsx("div",{className:"container",children:r.jsx("div",{className:"row",children:r.jsx("div",{className:"col-lg-12",children:r.jsxs("div",{className:"navigator-breadcrumb-wrapper",children:[r.jsx(Ie,{to:"/home",children:"Home"}),r.jsx("i",{className:"fa-regular fa-chevron-right"}),r.jsx("a",{className:"current",style:{cursor:"pointer"},children:"Cart"})]})})})})})}),oa=()=>r.jsxs(r.Fragment,{children:[r.jsx("button",{style:{backgroundColor:"#597545"},type:"button",className:"btn text-light  btn1","data-bs-toggle":"modal","data-bs-target":"#exampleModalCenter",children:"Add Address"}),r.jsx("div",{className:"modal",id:"exampleModalCenter",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true",children:r.jsx("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:r.jsxs("div",{className:"modal-content",children:[r.jsxs("div",{className:"modal-header d-flex align-items-center justify-content-between",children:[r.jsx("h4",{className:"mb-0",children:"Add Address"}),r.jsx("i",{style:{cursor:"pointer"},"data-bs-dismiss":"modal",children:r.jsx(ta,{size:20})}),r.jsx("button",{type:"button",className:"close","data-bs-dismiss":"modal","aria-label":"Close",children:r.jsx("span",{"aria-hidden":"true",children:"Ã—"})})]}),r.jsx("div",{className:"modal-body",children:r.jsx(ra,{isaddress:!0})})]})})})]});var we={};(function W(i,l,z,$){var X=!!(i.Worker&&i.Blob&&i.Promise&&i.OffscreenCanvas&&i.OffscreenCanvasRenderingContext2D&&i.HTMLCanvasElement&&i.HTMLCanvasElement.prototype.transferControlToOffscreen&&i.URL&&i.URL.createObjectURL),ne=typeof Path2D=="function"&&typeof DOMMatrix=="function",ge=function(){if(!i.OffscreenCanvas)return!1;var a=new OffscreenCanvas(1,1),e=a.getContext("2d");e.fillRect(0,0,1,1);var o=a.transferToImageBitmap();try{e.createPattern(o,"no-repeat")}catch{return!1}return!0}();function oe(){}function ee(a){var e=l.exports.Promise,o=e!==void 0?e:i.Promise;return typeof o=="function"?new o(a):(a(oe,oe),null)}var ae=function(a,e){return{transform:function(o){if(a)return o;if(e.has(o))return e.get(o);var d=new OffscreenCanvas(o.width,o.height),c=d.getContext("2d");return c.drawImage(o,0,0),e.set(o,d),d},clear:function(){e.clear()}}}(ge,new Map),Z=function(){var a=Math.floor(16.666666666666668),e,o,d={},c=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(u){var m=Math.random();return d[m]=requestAnimationFrame(function n(h){c===h||c+a-1<h?(c=h,delete d[m],u()):d[m]=requestAnimationFrame(n)}),m},o=function(u){d[u]&&cancelAnimationFrame(d[u])}):(e=function(u){return setTimeout(u,a)},o=function(u){return clearTimeout(u)}),{frame:e,cancel:o}}(),le=function(){var a,e,o={};function d(c){function u(m,n){c.postMessage({options:m||{},callback:n})}c.init=function(n){var h=n.transferControlToOffscreen();c.postMessage({canvas:h},[h])},c.fire=function(n,h,g){if(e)return u(n,null),e;var x=Math.random().toString(36).slice(2);return e=ee(function(v){function b(M){M.data.callback===x&&(delete o[x],c.removeEventListener("message",b),e=null,ae.clear(),g(),v())}c.addEventListener("message",b),u(n,x),o[x]=b.bind(null,{data:{callback:x}})}),e},c.reset=function(){c.postMessage({reset:!0});for(var n in o)o[n](),delete o[n]}}return function(){if(a)return a;if(!z&&X){var c=["var CONFETTI, SIZE = {}, module = {};","("+W.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{a=new Worker(URL.createObjectURL(new Blob([c])))}catch(u){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",u),null}d(a)}return a}}(),T={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function I(a,e){return e?e(a):a}function F(a){return a!=null}function y(a,e,o){return I(a&&F(a[e])?a[e]:T[e],o)}function de(a){return a<0?0:Math.floor(a)}function ie(a,e){return Math.floor(Math.random()*(e-a))+a}function O(a){return parseInt(a,16)}function pe(a){return a.map(se)}function se(a){var e=String(a).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:O(e.substring(0,2)),g:O(e.substring(2,4)),b:O(e.substring(4,6))}}function ce(a){var e=y(a,"origin",Object);return e.x=y(e,"x",Number),e.y=y(e,"y",Number),e}function ve(a){a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight}function re(a){var e=a.getBoundingClientRect();a.width=e.width,a.height=e.height}function ye(a){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=a,e}function D(a,e,o,d,c,u,m,n,h){a.save(),a.translate(e,o),a.rotate(u),a.scale(d,c),a.arc(0,0,1,m,n,h),a.restore()}function xe(a){var e=a.angle*(Math.PI/180),o=a.spread*(Math.PI/180);return{x:a.x,y:a.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:a.startVelocity*.5+Math.random()*a.startVelocity,angle2D:-e+(.5*o-Math.random()*o),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:a.color,shape:a.shape,tick:0,totalTicks:a.ticks,decay:a.decay,drift:a.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:a.gravity*3,ovalScalar:.6,scalar:a.scalar,flat:a.flat}}function be(a,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var o=e.tick++/e.totalTicks,d=e.x+e.random*e.tiltCos,c=e.y+e.random*e.tiltSin,u=e.wobbleX+e.random*e.tiltCos,m=e.wobbleY+e.random*e.tiltSin;if(a.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-o)+")",a.beginPath(),ne&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))a.fill(Ce(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(u-d)*.1,Math.abs(m-c)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var n=Math.PI/10*e.wobble,h=Math.abs(u-d)*.1,g=Math.abs(m-c)*.1,x=e.shape.bitmap.width*e.scalar,v=e.shape.bitmap.height*e.scalar,b=new DOMMatrix([Math.cos(n)*h,Math.sin(n)*h,-Math.sin(n)*g,Math.cos(n)*g,e.x,e.y]);b.multiplySelf(new DOMMatrix(e.shape.matrix));var M=a.createPattern(ae.transform(e.shape.bitmap),"no-repeat");M.setTransform(b),a.globalAlpha=1-o,a.fillStyle=M,a.fillRect(e.x-x/2,e.y-v/2,x,v),a.globalAlpha=1}else if(e.shape==="circle")a.ellipse?a.ellipse(e.x,e.y,Math.abs(u-d)*e.ovalScalar,Math.abs(m-c)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):D(a,e.x,e.y,Math.abs(u-d)*e.ovalScalar,Math.abs(m-c)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var f=Math.PI/2*3,w=4*e.scalar,C=8*e.scalar,R=e.x,B=e.y,J=5,U=Math.PI/J;J--;)R=e.x+Math.cos(f)*C,B=e.y+Math.sin(f)*C,a.lineTo(R,B),f+=U,R=e.x+Math.cos(f)*w,B=e.y+Math.sin(f)*w,a.lineTo(R,B),f+=U;else a.moveTo(Math.floor(e.x),Math.floor(e.y)),a.lineTo(Math.floor(e.wobbleX),Math.floor(c)),a.lineTo(Math.floor(u),Math.floor(m)),a.lineTo(Math.floor(d),Math.floor(e.wobbleY));return a.closePath(),a.fill(),e.tick<e.totalTicks}function je(a,e,o,d,c){var u=e.slice(),m=a.getContext("2d"),n,h,g=ee(function(x){function v(){n=h=null,m.clearRect(0,0,d.width,d.height),ae.clear(),c(),x()}function b(){z&&!(d.width===$.width&&d.height===$.height)&&(d.width=a.width=$.width,d.height=a.height=$.height),!d.width&&!d.height&&(o(a),d.width=a.width,d.height=a.height),m.clearRect(0,0,d.width,d.height),u=u.filter(function(M){return be(m,M)}),u.length?n=Z.frame(b):v()}n=Z.frame(b),h=v});return{addFettis:function(x){return u=u.concat(x),g},canvas:a,promise:g,reset:function(){n&&Z.cancel(n),h&&h()}}}function p(a,e){var o=!a,d=!!y(e||{},"resize"),c=!1,u=y(e,"disableForReducedMotion",Boolean),m=X&&!!y(e||{},"useWorker"),n=m?le():null,h=o?ve:re,g=a&&n?!!a.__confetti_initialized:!1,x=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,v;function b(f,w,C){for(var R=y(f,"particleCount",de),B=y(f,"angle",Number),J=y(f,"spread",Number),U=y(f,"startVelocity",Number),Ne=y(f,"decay",Number),Se=y(f,"gravity",Number),he=y(f,"drift",Number),te=y(f,"colors",pe),s=y(f,"ticks",Number),t=y(f,"shapes"),j=y(f,"scalar"),A=!!y(f,"flat"),q=ce(f),L=R,N=[],_=a.width*q.x,P=a.height*q.y;L--;)N.push(xe({x:_,y:P,angle:B,spread:J,startVelocity:U,color:te[L%te.length],shape:t[ie(0,t.length)],ticks:s,decay:Ne,gravity:Se,drift:he,scalar:j,flat:A}));return v?v.addFettis(N):(v=je(a,N,h,w,C),v.promise)}function M(f){var w=u||y(f,"disableForReducedMotion",Boolean),C=y(f,"zIndex",Number);if(w&&x)return ee(function(U){U()});o&&v?a=v.canvas:o&&!a&&(a=ye(C),document.body.appendChild(a)),d&&!g&&h(a);var R={width:a.width,height:a.height};n&&!g&&n.init(a),g=!0,n&&(a.__confetti_initialized=!0);function B(){if(n){var U={getBoundingClientRect:function(){if(!o)return a.getBoundingClientRect()}};h(U),n.postMessage({resize:{width:U.width,height:U.height}});return}R.width=R.height=null}function J(){v=null,d&&(c=!1,i.removeEventListener("resize",B)),o&&a&&(document.body.contains(a)&&document.body.removeChild(a),a=null,g=!1)}return d&&!c&&(c=!0,i.addEventListener("resize",B,!1)),n?n.fire(f,R,J):b(f,R,J)}return M.reset=function(){n&&n.reset(),v&&v.reset()},M}var Q;function ue(){return Q||(Q=p(null,{useWorker:!0,resize:!0})),Q}function Ce(a,e,o,d,c,u,m){var n=new Path2D(a),h=new Path2D;h.addPath(n,new DOMMatrix(e));var g=new Path2D;return g.addPath(h,new DOMMatrix([Math.cos(m)*c,Math.sin(m)*c,-Math.sin(m)*u,Math.cos(m)*u,o,d])),g}function Ae(a){if(!ne)throw new Error("path confetti are not supported in this browser");var e,o;typeof a=="string"?e=a:(e=a.path,o=a.matrix);var d=new Path2D(e),c=document.createElement("canvas"),u=c.getContext("2d");if(!o){for(var m=1e3,n=m,h=m,g=0,x=0,v,b,M=0;M<m;M+=2)for(var f=0;f<m;f+=2)u.isPointInPath(d,M,f,"nonzero")&&(n=Math.min(n,M),h=Math.min(h,f),g=Math.max(g,M),x=Math.max(x,f));v=g-n,b=x-h;var w=10,C=Math.min(w/v,w/b);o=[C,0,0,C,-Math.round(v/2+n)*C,-Math.round(b/2+h)*C]}return{type:"path",path:e,matrix:o}}function Me(a){var e,o=1,d="#000000",c='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof a=="string"?e=a:(e=a.text,o="scalar"in a?a.scalar:o,c="fontFamily"in a?a.fontFamily:c,d="color"in a?a.color:d);var u=10*o,m=""+u+"px "+c,n=new OffscreenCanvas(u,u),h=n.getContext("2d");h.font=m;var g=h.measureText(e),x=Math.ceil(g.actualBoundingBoxRight+g.actualBoundingBoxLeft),v=Math.ceil(g.actualBoundingBoxAscent+g.actualBoundingBoxDescent),b=2,M=g.actualBoundingBoxLeft+b,f=g.actualBoundingBoxAscent+b;x+=b+b,v+=b+b,n=new OffscreenCanvas(x,v),h=n.getContext("2d"),h.font=m,h.fillStyle=d,h.fillText(e,M,f);var w=1/o;return{type:"bitmap",bitmap:n.transferToImageBitmap(),matrix:[w,0,0,w,-x*w/2,-v*w/2]}}l.exports=function(){return ue().apply(this,arguments)},l.exports.reset=function(){ue().reset()},l.exports.create=p,l.exports.shapeFromPath=Ae,l.exports.shapeFromText=Me})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),we,!1);const Oe=we.exports;we.exports.create;const la=({trigger:W=!1})=>(S.useEffect(()=>{if(W){const l=Date.now()+2e3,z={startVelocity:90,spread:360,ticks:60,zIndex:10,particleCount:60,origin:{y:0}},$=setInterval(()=>{if(l-Date.now()<=0)return clearInterval($);Oe({...z,angle:60,origin:{x:0,y:0}}),Oe({...z,angle:120,origin:{x:1,y:0}})},250)}},[W]),null),da=({isFreeDelivery:W})=>{const[i,l]=S.useState(!1);return S.useEffect(()=>{if(W){l(!0);const z=setTimeout(()=>{l(!1)},3e3);return()=>clearTimeout(z)}},[W]),r.jsx(r.Fragment,{children:i&&r.jsxs("div",{className:"text-center mt-3  fw-bold text-success  showMessage",style:{position:"fixed",top:"20px",left:"50%",transform:"translateX(-50%)",backgroundColor:"#d1e7dd",color:"#0f5132",padding:"16px 24px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:9999,animation:"fadeInOut 5s ease-in-out forwards",maxWidth:"600px"},children:["ðŸŽ‰ Boom! You get ",r.jsx("strong",{children:"Free Delivery"})," on this order!"]})})},ia=ke.lazy(()=>Fe(()=>import("./App-9vCfEsS0.js").then(W=>W.$),__vite__mapDeps([0,1,2,3]))),Ee=ke.lazy(()=>Fe(()=>import("./App-9vCfEsS0.js").then(W=>W.a0),__vite__mapDeps([0,1,2,3]))),fa=({children:W})=>{var te;const i=Re();let l=E(s=>s.cartreducer.cartData);const z=Be(),{loading:$,sendApiRequest:X,status:ne}=fe(),{loading:ge,sendApiRequest:oe,status:ee}=fe(),{loading:ae,response:Z,sendApiRequest:le}=fe(),T=JSON.parse(sessionStorage.getItem("loggedInUser")),I=E(s=>s.addressreducer.address),F=E(s=>s.uireducer.addressid),y=async()=>{if(JSON.parse(sessionStorage.getItem("loggedInUser"))){const{obj:t}=await Qe();i(Le.setAddress(t==null?void 0:t.Response))}},de=E(s=>s.chatreducer.isLogged);S.useEffect(()=>{T&&y()},[ne==0||ee==0,de]);const ie=async s=>{i(k.setAddressid(null)),X("POST","/DeleteShippingAddress",{AddressId:s.AddressId,CustomerId:s.CustomerId,PesronName:s.PesronName,AddressName:s.AddressName,AddressType:s.AddressType,IsDefaultAddress:s.IsDefaultAddress,AddressContactNo:s.AddressContactNo,State:s.State,City:s.City,Country:s.Country,PinCode:s.PinCode,Address1:s.Address1,Landmark:s.Landmark},"",!0),y()},O=E(s=>s.cartreducer.address),pe=E(s=>s.cartreducer.pincode),se=E(s=>s.cartreducer.availabilityMap),ce=async s=>{ea(O)&&(oe("POST","/UpdateShippingAddress",{AddressId:s==null?void 0:s.AddressId,CustomerId:s==null?void 0:s.CustomerId,PesronName:O.fullName,AddressName:O.address,AddressType:O.addressType,IsDefaultAddress:O.isDefault,AddressContactNo:O.mobile,State:O.state,City:O.city,Country:O.country,PinCode:pe,Address1:"",Landmark:O.landMark},"",!0),i(V.setMultipleFields({address:"",addressType:"",city:"",fullName:"",isDefault:!1,landMark:"",mobile:"",state:""})),i(V.setPinCode(null))),y()},ve=async s=>{var j,A;const t=JSON.parse(sessionStorage.getItem("loggedInUser"));if(t){const L={Body:await H.encryptString(Y,JSON.stringify({CustomerId:t==null?void 0:t.CustomerId,ProductID:s}))};let N;N=await me.post("/AddCustomerWish",L);const _=await H.decryptString(Y,N.data.body),P=JSON.parse(_);if(P.Status===0){const K=await Te();i(De.setWishlist((A=(j=K==null?void 0:K.obj)==null?void 0:j.Response)==null?void 0:A.lstWishData))}P.Status===1&&G.error(P.Message),P.Status===3&&i(k.openModal())}else if(!t){i(k.openModal()),i(k.setScreen("login")),i(k.setUser());return}},re=async s=>{const t=JSON.parse(sessionStorage.getItem("loggedInUser"));if(!t){i(k.openModal()),i(k.setScreen("login")),i(k.setUser());return}if(t){const A={Body:await H.encryptString(Y,JSON.stringify({CustomerId:t==null?void 0:t.CustomerId,AddressId:s}))};let q;q=await me.post("/UpdateDefaultShippingAddress",A);const L=await H.decryptString(Y,q.data.body),N=JSON.parse(L);N.Status===0&&y(),N.Status===1&&G.error(N.Message),N.Status===3&&i(k.openModal())}else i(k.openModal())},{loading:ye,response:D,sendApiRequest:xe,status:be}=fe(),je=async()=>{var t,j;const s=JSON.parse(sessionStorage.getItem("loggedInUser"));if(xe("POST","/GetStoreList"),s){const A=await Te();i(De.setWishlist((j=(t=A==null?void 0:A.obj)==null?void 0:t.Response)==null?void 0:j.lstWishData))}};S.useEffect(()=>{je(),y()},[de]);const p=E(s=>s.uireducer.storelist),Q=JSON.parse(localStorage.getItem("storelist"));S.useEffect(()=>{if(D){if(i(k.setAllStoreLists(D==null?void 0:D.lstStoreData)),Q){i(k.setStorelist(Q));return}if((D==null?void 0:D.lstStoreData.length)>0){const s=D==null?void 0:D.lstStoreData.find(t=>parseInt(t==null?void 0:t.StoreID)===2);i(k.setStorelist(s))}}},[be==0]);const[ue,Ce]=S.useState(!1),[Ae,Me]=S.useState();S.useMemo(()=>l==null?void 0:l.reduce((s,t)=>s+parseInt(parseInt(t==null?void 0:t.BillPrice)*(t==null?void 0:t.quantity)-parseInt(parseInt(t==null?void 0:t.BillPrice)*(parseInt(t==null?void 0:t.DiscountPercent)||0)/100)+parseInt(t==null?void 0:t.DeliveryCharge)),0),[l]);const a=E(s=>s.uireducer.storeid),[e,o]=S.useState(""),d=E(s=>s.orderreducer.showPaymentModal),[c,u]=S.useState(""),m=S.useMemo(()=>(l==null?void 0:l.reduce((s,t)=>s+parseInt(Number((t==null?void 0:t.MRP)??0))*(t==null?void 0:t.quantity),0))??0,[l]),n=S.useMemo(()=>(l==null?void 0:l.reduce((s,t)=>s+parseInt(Number((t==null?void 0:t.BillPrice)??0))*(t==null?void 0:t.quantity),0))??0,[l]),h=S.useMemo(()=>(l==null?void 0:l.reduce((s,t)=>s+Math.round(parseInt(Number((t==null?void 0:t.MRP)??0))*parseInt(t.quantity)-parseInt(Number((t==null?void 0:t.BillPrice)??0))*parseInt(t.quantity)),0))??0,[l]);S.useMemo(()=>(l==null?void 0:l.length)>0?l==null?void 0:l.reduce((s,t)=>(t==null?void 0:t.OfferType)==="GRANDOFFER"?s+parseInt((t==null?void 0:t.BillPrice)??0):s,0):0,[l]);const g=S.useMemo(()=>l==null?void 0:l.reduce((s,t)=>s+parseInt(t==null?void 0:t.DeliveryCharge)*parseInt((t==null?void 0:t.quantity)||1),0),[l]),[x,v]=S.useState(!1),b=async()=>{var s,t;try{if(v(!0),T){const j={CustomerId:T.CustomerId},q={Body:await H.encryptString(Y,JSON.stringify({...j}))};let L;L=await me.post("/AllDeleteCustomerCart",q);const N=await H.decryptString(Y,L.data.body),_=JSON.parse(N);if(_.Status==0){const{obj:P}=await aa();i(V.setCartData((s=P==null?void 0:P.Response)==null?void 0:s.lstCartData))}_.Status===1&&G.error(_.Message),_.Status}else{const A={MainCartId:localStorage.getItem("maincartid")},L={Body:await H.encryptString(Y,JSON.stringify({...A}))};let N;N=await me.post("/AllDeleteCustomerCart",L);const _=await H.decryptString(Y,N.data.body),P=JSON.parse(_);if(P.Status==0){const K=await sa();i(V.setCartData((t=K==null?void 0:K.Response)==null?void 0:t.lstCartData))}P.Status===1&&G.error(P.Message),P.Status}}catch(j){G.error(j.Message),console.log(j.message)}finally{v(!1)}},M=E(s=>{var t;return(t=s==null?void 0:s.walletreducer)==null?void 0:t.totalWallet}),f=async()=>{if(JSON.parse(sessionStorage.getItem("loggedInUser"))){const{obj:t}=await Xe();i(We.setTotalWallet(t==null?void 0:t.Response))}};S.useEffect(()=>{f()},[]);const w=E(s=>s.walletreducer.loader),C=E(s=>s.cartreducer.personName),R=()=>{for(const t of l);for(const t in se)if(!se[t]){G.warn("Some Product Not Available In This Store!");return}if(!JSON.parse(sessionStorage.getItem("loggedInUser"))){i(k.openModal());return}if(!a&&((I==null?void 0:I.lstAddressData.length)<1||!F)){G.error("Select aleast one address for pickup");return}a?C.trim()?z(`/checkout?id=${btoa(e||C)}&addressid=${btoa("")}&storeid=${btoa(a)}&personname=${btoa(C)}`):G.error("Pickup person name is required"):z(`/checkout/?addressid=${btoa(F)}&storeid=${btoa("")}`)},B=E(s=>s.addressreducer.deleteloader),J=s=>{const{id:t,value:j}=s.target;o(j),i(V.setStorePersonName(j))},U=()=>{var t;const s=JSON.parse(sessionStorage.getItem("loggedInUser"));l.length>0&&a&&!F?le("POST","/CheckAvailability",{CustomerId:s==null?void 0:s.CustomerId,StoreID:a}):i((t=V)==null?void 0:t.resetAvailabilityMap())},Ne=()=>{var t;const s=JSON.parse(sessionStorage.getItem("loggedInUser"));l.length>0&&F&&!a?le("POST","/CheckAvailability",{CustomerId:s==null?void 0:s.CustomerId,StoreID:F&&1}):i((t=V)==null?void 0:t.resetAvailabilityMap())};S.useEffect(()=>{T&&U()},[a]),S.useEffect(()=>{T&&Ne()},[F,a]),S.useEffect(()=>{var s,t;T&&(i((s=V)==null?void 0:s.resetAvailabilityMap()),(t=Z==null?void 0:Z.lstCheckAvailabilityData)==null||t.forEach(j=>{i(V.setAvailableProducts(j))}))},[Z]);const Se=({DeleeryCharge:s,DiscountMrp:t,countTotalPrice:j,storeid:A,addressid:q})=>{const L=s>0?s:j>=999&&!A&&q?60:0,N=t+L;return N<=0?null:r.jsxs("p",{style:{fontSize:"11px"},className:"page-total-discount-message text-success",children:["Youâ€™re saving"," ",r.jsx("span",{className:"total-saving-amt","total-saving-amt":N,children:Number(j)>999&&!A&&T?` (discount â‚¹${t}  +  â‚¹60 delivery charge) = â‚¹${N}`:`â‚¹${N}`})," "]})},he=Number(n)>=999&&!a;return r.jsxs(r.Fragment,{children:[he&&T&&r.jsxs(r.Fragment,{children:[r.jsx(la,{trigger:!0}),r.jsx(da,{isFreeDelivery:he})]}),d&&r.jsx(qe,{iframeUrl:c}),r.jsx(na,{}),!B&&(l==null?void 0:l.length)>0?r.jsx("div",{className:"rts-cart-area",children:r.jsx("div",{className:"container",children:r.jsxs("div",{className:"row",children:[r.jsx("div",{className:"col-xl-9 col-lg-12 col-md-12",children:r.jsxs("div",{className:"cart-wrapper",children:[r.jsx("div",{className:"cartpage-header"}),T&&r.jsxs("div",{className:"card-full-width",children:[r.jsxs("div",{className:"d-flex mb-0 justify-content-between",children:[r.jsx("span",{className:"fw-bold fs-4  d-flex ",style:{color:"#587444"},children:"Delivery Mode"}),r.jsx(oa,{})]}),((te=I==null?void 0:I.lstAddressData)==null?void 0:te.length)>0&&r.jsx(r.Fragment,{children:I.lstAddressData.some(s=>(s==null?void 0:s.IsDefault)==="True")?I.lstAddressData.map(s=>(s==null?void 0:s.IsDefault)==="True"?r.jsx("small",{className:"deliver-btn",children:"Deliver Here"},s.AddressID):null):r.jsx(ze,{handleDefaultAddress:re,addresses:I.lstAddressData})}),r.jsx("div",{className:"row",children:(I==null?void 0:I.lstAddressData.length)>0&&(I==null?void 0:I.lstAddressData.map((s,t)=>(s==null?void 0:s.IsDefault)=="True"&&r.jsx(Ee,{handleDeleteAddress:ie,item:s,address:s==null?void 0:s.Address,addressType:s==null?void 0:s.AddressType,name:s==null?void 0:s.PersonName,city:s==null?void 0:s.City,country:s==null?void 0:s.Country,landmark:s==null?void 0:s.Landmark,mobile:s==null?void 0:s.AddressContactNo,pincode:s.Pincode,state:s.State,handleSaveAddress:ce,handleDefaultAddress:re,setDefaultAddress:Me,getAddress:y,setName:o,alladdress:I==null?void 0:I.lstAddressData},t)))}),r.jsx("span",{className:"fw-bold fs-4 d-flex",style:{color:"#587444"},children:"Store Pickup"}),r.jsx("small",{className:"deliver-btn",children:"Our Stores"}),r.jsxs("div",{className:"row",children:[(D==null?void 0:D.lstStoreData.length)>0&&r.jsx(Ee,{handleDeleteAddress:ie,item:p,address:p==null?void 0:p.StoreAddress,name:p==null?void 0:p.StoreName,isdefault:!0,city:p==null?void 0:p.StoreCity,country:p==null?void 0:p.StoreCountry,mobile:p==null?void 0:p.StoreMobile,pincode:p==null?void 0:p.StorePincode,state:p==null?void 0:p.StoreState,email:p==null?void 0:p.StoreEmail,handleSaveAddress:ce,handleDefaultAddress:re}),a&&r.jsx(_e,{handleChange:J,id:"name",isRequired:!0,placeholder:"Person Name",type:"text",value:C})]})]}),T&&r.jsx("div",{className:"card-body bg-white p-2 rounded my-3 ",children:r.jsx("div",{className:"congratulations my-2",children:r.jsxs("h4",{className:"fw-bold fs-5 text-center",children:[r.jsxs("span",{className:"text-secondary fw-medium",children:[" ","Wallet Amount :-"," "]}),Pe((M==null?void 0:M.TotalBalance)??0)]})})}),!a&&F&&T&&(n<999?r.jsx("div",{className:"card-body bg-white p-3 mb-3 border rounded",children:r.jsx("div",{className:"congratulations",children:r.jsxs("h4",{className:"fw-bold fs-5",children:[r.jsx("i",{className:"fa fa-check-circle","aria-hidden":"true"})," ","Add more"," ",r.jsx("b",{className:" text-danger",children:Pe(999-n)})," ","to get free home delivery !!"]})})}):r.jsx("div",{className:"card-body bg-white p-3 mb-3 border rounded",children:r.jsx("div",{className:"congratulations",children:r.jsxs("h4",{className:"fw-bold fs-5",children:[r.jsx("i",{className:"fa fa-check-circle","aria-hidden":"true"})," ","Free home delivery !"]})})})),r.jsx("div",{className:"cartpage-header"}),r.jsxs("div",{className:"card-full-width",children:[r.jsxs("h3",{className:"d-flex justify-content-between",children:[r.jsxs("p",{className:"h5",children:["My Cart",r.jsxs("span",{className:"text-secondary",children:["(Your Cart has",r.jsxs("span",{children:[" ",l.length," items"]}),")"]})]}),l.length>0&&r.jsx("p",{children:r.jsx("i",{onClick:b,style:{cursor:"pointer"},className:"text-danger d-inline-block p-1 bg-danger-subtle border rounded",children:r.jsx(Je,{size:20})})})]}),r.jsx("ul",{children:l.map((s,t)=>{const j=se[s.ProductId];return r.jsx(ia,{item:s,img:s==null?void 0:s.ProductThumbnail,name:s==null?void 0:s.ProductName,price:Number((s==null?void 0:s.BillingPrice)??0),mrp:Number((s==null?void 0:s.MRP)??0),discount:Number((s==null?void 0:s.DiscountPercent)??0),subname:s==null?void 0:s.SubcategoryName,handleAddWishlist:ve,isAvailable:j,checkAvailability:U},t)})})]})]})}),r.jsx("div",{className:"col-xl-3 col-lg-12 col-md-12",children:r.jsxs("div",{className:"price-details",children:[r.jsx("h3",{children:"Order details"}),r.jsxs("ul",{children:[r.jsxs("li",{children:[r.jsxs("span",{children:["Order Total MRP(",l.length??0," items)"]}),r.jsxs("span",{children:["â‚¹",m]})]}),r.jsxs("li",{children:[r.jsx("span",{children:"Your Discount"}),r.jsxs("span",{className:"amount-saved",children:["- â‚¹",h]})]}),r.jsxs("li",{children:[r.jsx("span",{children:"Total Price"}),r.jsxs("span",{children:["â‚¹",n]})]}),!a&&F&&T&&r.jsxs("li",{children:[r.jsx("span",{children:"Delivery Charges"}),r.jsxs("span",{className:"amount-saved",children:[" ",g>0?`${g}`:n>=999?r.jsxs("span",{children:[r.jsx("small",{className:"text-decoration-line-through ",children:"â‚¹60"}),"Â  ",r.jsx("span",{children:"Free"})]}):!a&&F?r.jsx(r.Fragment,{children:"â‚¹60"}):r.jsxs("span",{children:[r.jsx("small",{className:"text-decoration-line-through ",children:"â‚¹60"}),"Â  ",r.jsx("span",{children:"Free"})]})]})]})]}),r.jsxs("div",{className:"total-price",children:[r.jsx("span",{children:"TOTAL"}),r.jsxs("span",{children:["â‚¹",n+(g>0?g:n>=999?0:!a&&F?60:0)]})]}),Se({DeleeryCharge:g,DiscountMrp:h,countTotalPrice:n,storeid:a,addressid:F}),r.jsx("div",{className:"button-area",children:r.jsxs("button",{className:"sr-headless-checkout",onClick:R,children:["Checkout",ue&&r.jsx(r.Fragment,{children:r.jsx("div",{className:"spinner-border spinner-border-sm text-danger",role:"status"})})]})}),r.jsx("div",{className:"secure-payment",children:r.jsxs("p",{children:[r.jsx("img",{loading:"lazy",src:Ve,alt:"paymnet pic"})," 100% Secure Payments"]})}),r.jsx("div",{className:"payment-list-centered",children:r.jsx("img",{loading:"lazy",src:$e,alt:"payment cart pic"})}),r.jsx("div",{className:"icons-with-text",children:r.jsxs("ul",{children:[r.jsxs("li",{children:[r.jsx("div",{className:"icon",children:r.jsx("img",{loading:"lazy",src:Ze,alt:"delivery icon"})}),r.jsx("div",{className:"title-content",children:"Free delivery across India"})]}),r.jsxs("li",{children:[r.jsx("div",{className:"icon",children:r.jsx("img",{loading:"lazy",src:He,alt:"replacement icon"})}),r.jsx("div",{className:"title-content",children:"Easy replacement"})]}),r.jsxs("li",{children:[r.jsx("div",{className:"icon",children:r.jsx("img",{loading:"lazy",src:Ye,alt:"COVID-safety icon"})}),r.jsx("div",{className:"title-content",children:"Strict COVID-safety measures"})]}),r.jsxs("li",{children:[r.jsx("div",{className:"icon",children:r.jsx("img",{loading:"lazy",src:Ge,alt:"Secure payment pic"})}),r.jsx("div",{className:"title-content",children:"Secure payments"})]})]})}),r.jsxs("div",{className:"itrust-factors",children:[r.jsx(Ie,{to:"/return-policy",children:"Cancellation policy"}),r.jsx(Ie,{to:"/return-policy",children:"Returns policy"})]})]})})]})})}):!B&&r.jsx(Ke,{}),(ge||$||ye||w||x||ae||B)&&r.jsx(Ue,{})]})};export{fa as default};
