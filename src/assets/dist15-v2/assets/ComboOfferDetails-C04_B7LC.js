import{j as e,b as r,d as z,l as T,c as q,m as K,y as W,f as I}from"./index-CQ0pFaA9.js";import{c as N}from"./nofound-CRBnTOU2.js";import{S as Z}from"./SimilarProduct-B0-9aVSR.js";import{u as b,Q as w,g as U,a as J}from"./App-9vCfEsS0.js";import"./SectionTitle-BCTij8KB.js";function _({img:a,previewImg:d}){const[R,p]=r.useState(!1),s=()=>{p(!0)},l=r.useRef(),g=r.useRef(),[P,j]=r.useState(!1),f=o=>{const u=l.current,c=g.current,C=u.getBoundingClientRect(),n=o.clientX-C.left,v=o.clientY-C.top,m=n/u.offsetWidth*100,S=v/u.offsetHeight*100;c.style.backgroundPosition=`${m??0}% ${S??0}%`};return e.jsxs("div",{className:"zoom-wrapper",children:[e.jsx("div",{className:"zoom-img-container",onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),onMouseMove:f,children:e.jsx("img",{loading:"lazy",ref:l,src:R?N:a,onError:s,alt:"Zoomable",className:"main-img",style:{cursor:"crosshair"}})}),P&&e.jsx("div",{ref:g,className:"zoom-box",style:{backgroundImage:`url(${d})`}})]})}function $({img:a,previewImg:d}){return e.jsx(_,{img:a,previewImg:d})}const Y=()=>{var E,A;const a=z(t=>t.cartreducer.cartData),{search:d}=T(),p=new URLSearchParams(d).get("id");let s;const{loading:l,sendApiRequest:g}=b(),{loading:P,response:j,sendApiRequest:f}=b(),{response:o,sendApiRequest:u}=b();r.useEffect(()=>{g("POST","/ProductDetail",{ProductID:s==null?void 0:s.bigIntPKComboOfferId}),f("POST","/SimilarProductList",{ProductID:s==null?void 0:s.bigIntPKComboOfferId}),u("POST","/GetComboProductOfferList",{PkOfferId:p})},[p]),r.useEffect(()=>{window.scroll({top:"0",behavior:"smooth"})},[s==null?void 0:s.bigIntPKComboOfferId]);const c=q(),[C,n]=r.useState(!1),v=async t=>{const y=JSON.parse(sessionStorage.getItem("loggedInUser"));try{if(y){n(!0),c(I.handleAddProduct({CartData:a,cartdata:t,combo:"combo"}));const h=async()=>{var x;const{obj:i}=await U();c(I.setCartData((x=i==null?void 0:i.Response)==null?void 0:x.lstCartData)),setTimeout(()=>{n(!1)},500)};setTimeout(()=>{h()},500)}else{n(!0),c(I.handleAddProduct({CartData:a,cartdata:t,combo:"combo"}));const h=async()=>{var x;const i=await J();c(I.setCartData((x=i==null?void 0:i.Response)==null?void 0:x.lstCartData)),setTimeout(()=>{n(!1)},1e3)};setTimeout(()=>{h()},500)}}catch(h){console.log(h.message)}},[m,S]=r.useState(!1),D=()=>{S(!0)},[M,L]=r.useState(!1);r.useEffect(()=>{const t=()=>{L(window.innerWidth<=992)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const k=()=>{navigator.share?navigator.share({title:"My App",text:"Check out this cool link!",url:window.location.href}).then(()=>console.log("Shared successfully")).catch(t=>console.error("Error sharing",t)):W.error("Web Share API is not supported in your browser.")};try{s=o==null?void 0:o.lstComboOffer[0],typeof(s==null?void 0:s.OfferDetail)=="string"&&(s.OfferDetail=s.OfferDetail&&JSON.parse(s.OfferDetail))}catch(t){return console.error("Invalid combo offer data",t),!l&&e.jsx("div",{className:"text-center text-bg-danger",children:"Invalid combo data"})}return e.jsx("div",{className:"combo-offer-details my-4",children:e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"rts-chop-details-area py-5",children:e.jsxs("div",{className:"container",children:[s&&e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-xl-6 col-lg-6 col-md-12 p-0",children:e.jsx("div",{className:"product-details-img ",children:M?e.jsx("img",{src:m?N:s==null?void 0:s.OfferImage,onError:D,alt:"product imgage"}):e.jsx($,{img:m?N:s==null?void 0:s.OfferImage,previewImg:m?N:s==null?void 0:s.OfferImage,onError:D})})}),e.jsxs("div",{className:"col-xl-6 col-lg-6 col-md-12",children:[e.jsx("div",{className:"product-details-popup",children:e.jsxs("div",{className:"details-product-area",children:[e.jsx("h2",{className:"product-title",children:s==null?void 0:s.ComboName}),e.jsxs("p",{className:"d-flex mb-2 align-content-center",children:[e.jsxs("a",{href:"",children:[" ",s==null?void 0:s.ComboDiscription]})," "]}),e.jsxs("div",{className:"product-price",children:["₹",parseInt(s==null?void 0:s.SalePrice),e.jsxs("span",{className:"old-price ml--15",children:["MRP ₹",parseInt(s==null?void 0:s.MRP)]})]}),e.jsxs("div",{className:"product-uniques d-flex ",children:[e.jsx("div",{className:"icon",children:e.jsx("i",{className:"fa-regular  fa-share-nodes",onClick:k,style:{cursor:"pointer"}})}),JSON.parse(sessionStorage.getItem("loggedInUser"))?a!=null&&a.find(t=>(t==null?void 0:t.ProductId)===(s==null?void 0:s.bigIntPKComboOfferId))?e.jsx("div",{style:{maxWidth:"200px"},children:e.jsx(w,{cartdata:a.find(t=>(t==null?void 0:t.ProductId)===(s==null?void 0:s.bigIntPKComboOfferId))})}):e.jsx("button",{onClick:()=>v(s),className:"addtocart",children:"Add to cart"}):((E=a==null?void 0:a.find(t=>t.ProductId===(s==null?void 0:s.bigIntPKComboOfferId)))==null?void 0:E.qty)>0?e.jsx("div",{style:{maxWidth:"200px"},children:e.jsx(w,{cartdata})}):a!=null&&a.find(t=>(t==null?void 0:t.ProductId)===(s==null?void 0:s.bigIntPKComboOfferId))?e.jsx("div",{style:{maxWidth:"200px"},children:e.jsx(w,{cartdata:a.find(t=>(t==null?void 0:t.ProductId)===(s==null?void 0:s.bigIntPKComboOfferId))})}):e.jsx("button",{onClick:()=>v(s),className:"addtocart",children:"Add to cart"})]})]})}),e.jsx("div",{className:"combo-details",children:e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"style_look_product_heading",children:e.jsx("h4",{children:"Combo"})}),e.jsx("div",{className:"combo",children:e.jsx("div",{className:"combodetails",children:e.jsx("ul",{children:e.jsx("li",{children:e.jsx("div",{className:"combo-list",children:e.jsx("div",{className:"combo-list2",children:e.jsx("div",{className:"combo-list3",children:(A=s.OfferDetail)==null?void 0:A.map((t,y)=>e.jsxs("div",{className:"axil-product",children:[e.jsx("div",{className:"thumbnail",children:e.jsx("a",{children:e.jsx("div",{className:"thumb",children:e.jsx("img",{src:t.ProductImage,alt:""})})})}),e.jsx("div",{className:"product-content",children:e.jsxs("div",{className:"inner",children:[e.jsx("a",{href:"javascript:void(0);",children:e.jsx("strong",{title:t.Productname,children:t.Productname})}),e.jsxs("div",{className:"product-price-variant",children:[e.jsxs("span",{className:"price text-decoration-line-through current-price",children:["₹",t.numMRP]}),"  ",e.jsxs("span",{className:"price  current-price",children:["₹",t.numPrice]})]})]})})]},y))})})})})})})})]})})]})]}),e.jsxs("div",{className:"similar-products",children:[e.jsx(Z,{similarProductResponce:j}),(l||P)&&e.jsx(K,{})]})]})})})})};export{Y as default};
